<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>LMS - Courses</title>
  <link rel="stylesheet" href="style.css"/>
</head>
<body>
  <nav id="main-nav"></nav>

  <main>
    <h1>Courses</h1>

    <div class="card">
      <h2>Add Course</h2>
      <div id="course-alert" class="alert alert-error"></div>
      <div class="row" style="align-items:flex-end;">
        <div class="form-group" style="flex:1; margin-bottom:0;">
          <label>Course Name</label>
          <input type="text" id="c-name" placeholder="e.g. Web Development"/>
        </div>
        <div class="form-group" style="flex:1; margin-bottom:0;">
          <label>Instructor</label>
          <input type="text" id="c-instructor" placeholder="e.g. Dr. Smith"/>
        </div>
        <button class="btn btn-primary" onclick="addCourse()" style="flex-shrink:0;">Add</button>
      </div>
    </div>

    <!-- List -->
    <h2>Enrolled Courses <span id="course-count" style="font-size:12px; color:#777;"></span></h2>
    <div id="course-list"></div>
  </main>

  <script src="nav.js"></script>
  <script>
    renderNav('courses');

    function getCourses()    { return JSON.parse(localStorage.getItem('lms_courses') || '[]'); }
    function saveCourses(arr){ localStorage.setItem('lms_courses', JSON.stringify(arr)); }

    function addCourse() {
      const name       = document.getElementById('c-name').value.trim();
      const instructor = document.getElementById('c-instructor').value.trim();
      const alertEl    = document.getElementById('course-alert');

      if (!name || !instructor) {
        alertEl.textContent = 'Course Name and Instructor are required.';
        alertEl.classList.add('show');
        return;
      }
      alertEl.classList.remove('show');

      const courses = getCourses();
      courses.push({ id: Date.now(), name, instructor });
      saveCourses(courses);
      document.getElementById('c-name').value       = '';
      document.getElementById('c-instructor').value = '';
      render();
    }

    function deleteCourse(id) {
      if (!confirm('Delete this course?')) return;
      saveCourses(getCourses().filter(c => c.id !== id));
      render();
    }

    function esc(s) {
      return s.replace(/&/g,'&amp;').replace(/</g,'&lt;').replace(/>/g,'&gt;');
    }

    function render() {
      const courses = getCourses();
      document.getElementById('course-count').textContent = '(' + courses.length + ')';
      const el = document.getElementById('course-list');

      if (!courses.length) { el.innerHTML = '<div class="empty">No courses yet.</div>'; return; }

      el.innerHTML = courses.map(c => `
        <div class="item">
          <span class="item-title">${esc(c.name)} - Instructor: ${esc(c.instructor)}</span>
          <div class="item-actions">
            <button class="btn btn-danger" onclick="deleteCourse(${c.id})">Delete</button>
          </div>
        </div>
      `).join('');
    }

    render();
    document.getElementById('c-instructor').addEventListener('keydown', e => { if (e.key === 'Enter') addCourse(); });
  </script>
</body>
</html>
